# PromptShare Live 배포 가이드 (PaaS 전용)

본 문서는 PromptShare Live 프로젝트를 **PaaS (Platform as a Service)** 환경에 쉽고 빠르게 배포(Deployment)하기 위한 가이드라인입니다. 
가상 머신이나 복잡한 인프라 설정 없이, 소스 코드를 연결하는 것만으로 손쉽게 웹에 서비스를 런칭할 수 있습니다.

## 1. 추천 PaaS 플랫폼 소개

PromptShare Live는 Node.js와 Socket.io를 사용하므로, WebSocket 소켓 통신을 원활하게 지원하는 플랫폼을 선택하는 것이 좋습니다.

* **Render (권장)**: 무료 플랜(Free Tier)을 갖추고 있으며 GitHub와 쉽게 연동됩니다. 직관적인 UI와 WebSocket(실시간 통신)을 자동 지원하여 가장 매끄러운 배포 경험을 제공합니다.
* **Railway**: GitHub 저장소를 연결하면 자동으로 환경을 감지하여 배포해 주는 현대적인 플랫폼입니다. 초기 설정이 매우 간단하며 실시간 앱 구동에 적합합니다.
* **Koyeb**: 빠른 글로벌 배포와 WebSocket 지원이 뛰어난 플랫폼입니다. 무료 플랜을 제공하며 빠른 속도와 편리한 관리를 강점으로 내세웁니다.
* **Fly.io**: Docker 컨테이너를 기반으로 전 세계 엣지 네트워크에 빠르게 앱을 배포할 수 있는 강력한 플랫폼입니다. Node.js 환경의 배포도 매우 원활합니다.
* **Heroku**: 전통적인 PaaS의 선두 주자입니다. 유료로 전환되었으나, 안정적이고 풍부한 관련 자료를 찾을 수 있다는 장점이 있습니다.

> ⚠️ Vercel, Netlify 등은 주로 정적 파일 제거나 Serverless Function 위주이므로, 오랫동안 연결을 유지해야 하는 Socket.io(웹소켓) 기반 서비스에는 적합하지 않습니다.

## 2. 배포 전 환경 변수(Environment Variables) 설정

배포 환경에서는 보안을 위해 소스코드 내 하드코딩된 비밀번호 대신 **환경 변수**를 사용해야 합니다. 
각 PaaS 플랫폼의 대시보드(Settings > Environment Variables)에서 다음 변수를 필수로 추가해 주세요.

* `ADMIN_PASSWORD`: 관리자(강사) 권한 인증에 사용될 강력한 비밀번호 (예: `MySecurePass!2026`)

*(필수) `ADMIN_PASSWORD`를 명시적으로 설정하지 않으면 취약한 기본 비밀번호(`1234`)로 구동되어 보안 경고가 발생합니다.*
*(`PORT` 환경변수는 PaaS 플랫폼에서 자체적으로 알아서 할당해주므로 보통 수동으로 설정하지 않아도 됩니다.)*

## 3. 공통 배포 방법

거의 모든 PaaS 플랫폼은 비슷한 배포 흐름을 따릅니다. 

1. **GitHub 저장소 생성 및 푸시**: 현재 작업한 프로젝트 로컬 폴더를 본인의 GitHub 저장소에 올립니다.
2. **PaaS 플랫폼 연동**: 원하는 PaaS(예: Render)에 로그인하여 **New Web Service**(또는 App)를 만들고 GitHub 저장소를 연결합니다.
3. **빌드 및 실행 명령어 설정** (플랫폼에서 자동으로 감지해 주기도 합니다)
   * **Build Command**: 패키지 구성을 설치하는 과정
     ```bash
     npm install
     ```
   * **Start Command**: 설치된 패키지를 런칭하는 명령어 (package.json에 등록되어 있음)
     ```bash
     npm start
     ```
4. 앞서 언급한 **환경 변수(`ADMIN_PASSWORD`)**를 추가로 입력합니다.
5. **Deploy(배포)** 버튼을 눌러 서버를 구동합니다.

## 4. 운영 시 주의사항 (In-memory 한계점)

> **서버 재시작(슬립 모드)에 따른 데이터 초기화**

* 무료 PaaS 티어를 사용할 경우, 일정 시간 접속자가 없으면 서버가 **슬립 모드(Sleep)**로 전환됩니다.
* 누군가 다시 접속하면 서버가 깨어나지만, 이 과정에서 서버 메모리에 임시로 기록해 두었던 **교육장 접속 URL 세션과 대화 내용 기록이 전부 초기화**됩니다.
* 영구적인 대화 보존이 필요하다면 향후 DB 연동이 필요할 수 있지만, '단기 라이브 교육용'이라는 현재 목적에는 오히려 이런 휘발성 특징이 보안이나 관리 면에서 장점이 될 수 있습니다. 매 수업 전 시작할 때마다 접속 경로를 갱신(Rotate url)하여 배포하는 방식을 권장합니다.
